{
	"info": {
		"_postman_id": "ttlock-api-collection-2024",
		"name": "TTLock API Collection",
		"description": "Complete TTLock API collection with sample payloads, responses, and test scripts for local, staging, and production environments.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "ttlock-api"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Get Access Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "clientId",
									"value": "{{clientId}}",
									"type": "text"
								},
								{
									"key": "clientSecret",
									"value": "{{clientSecret}}",
									"type": "text"
								},
								{
									"key": "username",
									"value": "{{username}}",
									"type": "text"
								},
								{
									"key": "password",
									"value": "{{password}}",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/oauth/access_token",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"oauth",
								"access_token"
							]
						},
						"description": "Get access token for TTLock API authentication"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "clientId",
											"value": "your_client_id",
											"type": "text"
										},
										{
											"key": "clientSecret",
											"value": "your_client_secret",
											"type": "text"
										},
										{
											"key": "username",
											"value": "your_username",
											"type": "text"
										},
										{
											"key": "password",
											"value": "your_password",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "https://api.ttlock.com/oauth/access_token",
									"protocol": "https",
									"host": [
										"api",
										"ttlock",
										"com"
									],
									"path": [
										"oauth",
										"access_token"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"errcode\": 0,\n    \"errmsg\": \"success\",\n    \"access_token\": \"your_access_token_here\",\n    \"refresh_token\": \"your_refresh_token_here\",\n    \"scope\": \"user\",\n    \"expires_in\": 7200\n}"
						}
					],
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has access_token\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.have.property('access_token');",
									"    pm.expect(jsonData.access_token).to.be.a('string');",
									"});",
									"",
									"pm.test(\"Response has errcode 0\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.errcode).to.eql(0);",
									"});",
									"",
									"// Set access token to environment variable",
									"if (pm.response.json().access_token) {",
									"    pm.environment.set('accessToken', pm.response.json().access_token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					]
				}
			],
			"description": "Authentication endpoints for TTLock API"
		},
		{
			"name": "TTLock Callbacks",
			"item": [
				{
					"name": "Single Callback - Unlock Event",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "lockId",
									"value": "12345678",
									"type": "text"
								},
								{
									"key": "lockMac",
									"value": "AA:BB:CC:DD:EE:FF",
									"type": "text"
								},
								{
									"key": "admin",
									"value": "admin_user",
									"type": "text"
								},
								{
									"key": "notifyType",
									"value": "1",
									"type": "text"
								},
								{
									"key": "records",
									"value": "[{\"recordType\":8,\"success\":1,\"username\":\"user123\",\"keyboardPwd\":\"\",\"lockDate\":1703123456789,\"serverDate\":1703123456789,\"electricQuantity\":85}]",
									"type": "text"
								},
								{
									"key": "recordTypeFromLock",
									"value": "20",
									"type": "text"
								},
								{
									"key": "recordType",
									"value": "8",
									"type": "text"
								},
								{
									"key": "success",
									"value": "1",
									"type": "text"
								},
								{
									"key": "username",
									"value": "user123",
									"type": "text"
								},
								{
									"key": "keyboardPwd",
									"value": "",
									"type": "text"
								},
								{
									"key": "lockDate",
									"value": "1703123456789",
									"type": "text"
								},
								{
									"key": "serverDate",
									"value": "1703123456789",
									"type": "text"
								},
								{
									"key": "electricQuantity",
									"value": "85",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/ttlock-callback",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"ttlock-callback"
							]
						},
						"description": "Single callback for unlock event (fingerprint unlock)"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "lockId",
											"value": "12345678",
											"type": "text"
										},
										{
											"key": "lockMac",
											"value": "AA:BB:CC:DD:EE:FF",
											"type": "text"
										},
										{
											"key": "admin",
											"value": "admin_user",
											"type": "text"
										},
										{
											"key": "notifyType",
											"value": "1",
											"type": "text"
										},
										{
											"key": "records",
											"value": "[{\"recordType\":8,\"success\":1,\"username\":\"user123\",\"keyboardPwd\":\"\",\"lockDate\":1703123456789,\"serverDate\":1703123456789,\"electricQuantity\":85}]",
											"type": "text"
										},
										{
											"key": "recordTypeFromLock",
											"value": "20",
											"type": "text"
										},
										{
											"key": "recordType",
											"value": "8",
											"type": "text"
										},
										{
											"key": "success",
											"value": "1",
											"type": "text"
										},
										{
											"key": "username",
											"value": "user123",
											"type": "text"
										},
										{
											"key": "keyboardPwd",
											"value": "",
											"type": "text"
										},
										{
											"key": "lockDate",
											"value": "1703123456789",
											"type": "text"
										},
										{
											"key": "serverDate",
											"value": "1703123456789",
											"type": "text"
										},
										{
											"key": "electricQuantity",
											"value": "85",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "https://api.yourdomain.com/api/v1/ttlock-callback",
									"protocol": "https",
									"host": [
										"api",
										"yourdomain",
										"com"
									],
									"path": [
										"api",
										"v1",
										"ttlock-callback"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"message\": \"Callback processed and saved successfully\",\n    \"data\": {\n        \"callback_id\": 123,\n        \"event_type\": \"lock_operation\",\n        \"message\": \"Unlocked via fingerprint\",\n        \"mode\": \"online\"\n    }\n}"
						}
					],
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has success true\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});",
									"",
									"pm.test(\"Response has callback_id\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('callback_id');",
									"    pm.expect(jsonData.data.callback_id).to.be.a('number');",
									"});",
									"",
									"pm.test(\"Response has event_type\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('event_type');",
									"    pm.expect(jsonData.data.event_type).to.be.a('string');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "Single Callback - Battery Low",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "lockId",
									"value": "87654321",
									"type": "text"
								},
								{
									"key": "lockMac",
									"value": "FF:EE:DD:CC:BB:AA",
									"type": "text"
								},
								{
									"key": "admin",
									"value": "admin_user",
									"type": "text"
								},
								{
									"key": "notifyType",
									"value": "1",
									"type": "text"
								},
								{
									"key": "records",
									"value": "[{\"recordType\":44,\"success\":1,\"username\":\"\",\"keyboardPwd\":\"\",\"lockDate\":1703123456789,\"serverDate\":1703123456789,\"electricQuantity\":15}]",
									"type": "text"
								},
								{
									"key": "recordTypeFromLock",
									"value": "44",
									"type": "text"
								},
								{
									"key": "recordType",
									"value": "44",
									"type": "text"
								},
								{
									"key": "success",
									"value": "1",
									"type": "text"
								},
								{
									"key": "username",
									"value": "",
									"type": "text"
								},
								{
									"key": "keyboardPwd",
									"value": "",
									"type": "text"
								},
								{
									"key": "lockDate",
									"value": "1703123456789",
									"type": "text"
								},
								{
									"key": "serverDate",
									"value": "1703123456789",
									"type": "text"
								},
								{
									"key": "electricQuantity",
									"value": "15",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/ttlock-callback",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"ttlock-callback"
							]
						},
						"description": "Single callback for battery low event"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "lockId",
											"value": "87654321",
											"type": "text"
										},
										{
											"key": "lockMac",
											"value": "FF:EE:DD:CC:BB:AA",
											"type": "text"
										},
										{
											"key": "admin",
											"value": "admin_user",
											"type": "text"
										},
										{
											"key": "notifyType",
											"value": "1",
											"type": "text"
										},
										{
											"key": "records",
											"value": "[{\"recordType\":44,\"success\":1,\"username\":\"\",\"keyboardPwd\":\"\",\"lockDate\":1703123456789,\"serverDate\":1703123456789,\"electricQuantity\":15}]",
											"type": "text"
										},
										{
											"key": "recordTypeFromLock",
											"value": "44",
											"type": "text"
										},
										{
											"key": "recordType",
											"value": "44",
											"type": "text"
										},
										{
											"key": "success",
											"value": "1",
											"type": "text"
										},
										{
											"key": "username",
											"value": "",
											"type": "text"
										},
										{
											"key": "keyboardPwd",
											"value": "",
											"type": "text"
										},
										{
											"key": "lockDate",
											"value": "1703123456789",
											"type": "text"
										},
										{
											"key": "serverDate",
											"value": "1703123456789",
											"type": "text"
										},
										{
											"key": "electricQuantity",
											"value": "15",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "https://api.yourdomain.com/api/v1/ttlock-callback",
									"protocol": "https",
									"host": [
										"api",
										"yourdomain",
										"com"
									],
									"path": [
										"api",
										"v1",
										"ttlock-callback"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"message\": \"Callback processed and saved successfully\",\n    \"data\": {\n        \"callback_id\": 124,\n        \"event_type\": \"battery_low\",\n        \"message\": \"Battery level is low (15%)\",\n        \"mode\": \"online\"\n    }\n}"
						}
					],
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has success true\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});",
									"",
									"pm.test(\"Response has battery_low event_type\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.event_type).to.eql('battery_low');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "Batch Callback - Multiple Events",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/x-www-form-urlencoded"
							},
							{
								"key": "X-Batch-Sync",
								"value": "true"
							}
						],
						"body": {
							"mode": "urlencoded",
							"urlencoded": [
								{
									"key": "lockId",
									"value": "11111111",
									"type": "text"
								},
								{
									"key": "lockMac",
									"value": "11:22:33:44:55:66",
									"type": "text"
								},
								{
									"key": "admin",
									"value": "admin_user",
									"type": "text"
								},
								{
									"key": "notifyType",
									"value": "1",
									"type": "text"
								},
								{
									"key": "records",
									"value": "[{\"recordType\":8,\"success\":1,\"username\":\"user1\",\"keyboardPwd\":\"\",\"lockDate\":1703123456789,\"serverDate\":1703123456789,\"electricQuantity\":85},{\"recordType\":20,\"success\":1,\"username\":\"user2\",\"keyboardPwd\":\"\",\"lockDate\":1703123516789,\"serverDate\":1703123516789,\"electricQuantity\":82},{\"recordType\":44,\"success\":1,\"username\":\"\",\"keyboardPwd\":\"\",\"lockDate\":1703123576789,\"serverDate\":1703123576789,\"electricQuantity\":15}]",
									"type": "text"
								},
								{
									"key": "batch_sync",
									"value": "true",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/v1/ttlock-callback",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"ttlock-callback"
							]
						},
						"description": "Batch callback with multiple events (offline sync scenario)"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/x-www-form-urlencoded"
									},
									{
										"key": "X-Batch-Sync",
										"value": "true"
									}
								],
								"body": {
									"mode": "urlencoded",
									"urlencoded": [
										{
											"key": "lockId",
											"value": "11111111",
											"type": "text"
										},
										{
											"key": "lockMac",
											"value": "11:22:33:44:55:66",
											"type": "text"
										},
										{
											"key": "admin",
											"value": "admin_user",
											"type": "text"
										},
										{
											"key": "notifyType",
											"value": "1",
											"type": "text"
										},
										{
											"key": "records",
											"value": "[{\"recordType\":8,\"success\":1,\"username\":\"user1\",\"keyboardPwd\":\"\",\"lockDate\":1703123456789,\"serverDate\":1703123456789,\"electricQuantity\":85},{\"recordType\":20,\"success\":1,\"username\":\"user2\",\"keyboardPwd\":\"\",\"lockDate\":1703123516789,\"serverDate\":1703123516789,\"electricQuantity\":82},{\"recordType\":44,\"success\":1,\"username\":\"\",\"keyboardPwd\":\"\",\"lockDate\":1703123576789,\"serverDate\":1703123576789,\"electricQuantity\":15}]",
											"type": "text"
										},
										{
											"key": "batch_sync",
											"value": "true",
											"type": "text"
										}
									]
								},
								"url": {
									"raw": "https://api.yourdomain.com/api/v1/ttlock-callback",
									"protocol": "https",
									"host": [
										"api",
										"yourdomain",
										"com"
									],
									"path": [
										"api",
										"v1",
										"ttlock-callback"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"message\": \"Batch callback processed successfully\",\n    \"data\": {\n        \"total_processed\": 3,\n        \"successful\": 3,\n        \"failed\": 0,\n        \"results\": [\n            {\n                \"callback_id\": 125,\n                \"event_type\": \"lock_operation\",\n                \"message\": \"Unlocked via fingerprint\",\n                \"status\": \"success\"\n            },\n            {\n                \"callback_id\": 126,\n                \"event_type\": \"lock_operation\",\n                \"message\": \"Unlocked via fingerprint\",\n                \"status\": \"success\"\n            },\n            {\n                \"callback_id\": 127,\n                \"event_type\": \"battery_low\",\n                \"message\": \"Battery level is low (15%)\",\n                \"status\": \"success\"\n            }\n        ]\n    }\n}"
						}
					],
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has success true\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});",
									"",
									"pm.test(\"Response has batch data\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('total_processed');",
									"    pm.expect(jsonData.data).to.have.property('successful');",
									"    pm.expect(jsonData.data).to.have.property('failed');",
									"    pm.expect(jsonData.data).to.have.property('results');",
									"});",
									"",
									"pm.test(\"All events processed successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.successful).to.eql(jsonData.data.total_processed);",
									"    pm.expect(jsonData.data.failed).to.eql(0);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					]
				}
			],
			"description": "TTLock callback endpoints for receiving lock events"
		},
		{
			"name": "Callback History",
			"item": [
				{
					"name": "Get Callback History",
					"request": {
						"method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{API_STATIC_TOKEN}}",
                                "type": "text"
                            }
                        ],
						"url": {
							"raw": "{{baseUrl}}/api/v1/ttlock-callback/history?page=1&per_page=10&search=&event_type=&processed=&date_from=&date_to=",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"ttlock-callback",
								"history"
							],
							"query": [
								{
									"key": "page",
									"value": "1",
									"description": "Page number"
								},
								{
									"key": "per_page",
									"value": "10",
									"description": "Items per page"
								},
								{
									"key": "search",
									"value": "",
									"description": "Search term"
								},
								{
									"key": "event_type",
									"value": "",
									"description": "Filter by event type"
								},
								{
									"key": "processed",
									"value": "",
									"description": "Filter by processed status"
								},
								{
									"key": "date_from",
									"value": "",
									"description": "Filter from date (YYYY-MM-DD)"
								},
								{
									"key": "date_to",
									"value": "",
									"description": "Filter to date (YYYY-MM-DD)"
								}
							]
						},
						"description": "Get paginated callback history with filters"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer your_access_token_here",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://api.yourdomain.com/api/v1/ttlock-callback/history?page=1&per_page=10&search=&event_type=&processed=&date_from=&date_to=",
									"protocol": "https",
									"host": [
										"api",
										"yourdomain",
										"com"
									],
									"path": [
										"api",
										"v1",
										"ttlock-callback",
										"history"
									],
									"query": [
										{
											"key": "page",
											"value": "1"
										},
										{
											"key": "per_page",
											"value": "10"
										},
										{
											"key": "search",
											"value": ""
										},
										{
											"key": "event_type",
											"value": ""
										},
										{
											"key": "processed",
											"value": ""
										},
										{
											"key": "date_from",
											"value": ""
										},
										{
											"key": "date_to",
											"value": ""
										}
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"message\": \"Callback history retrieved successfully\",\n    \"data\": {\n        \"current_page\": 1,\n        \"data\": [\n            {\n                \"id\": 123,\n                \"lock_id\": \"12345678\",\n                \"lock_mac\": \"AA:BB:CC:DD:EE:FF\",\n                \"admin\": \"admin_user\",\n                \"notify_type\": 1,\n                \"records\": [{\"recordType\":8,\"success\":1,\"username\":\"user123\",\"keyboardPwd\":\"\",\"lockDate\":1703123456789,\"serverDate\":1703123456789,\"electricQuantity\":85}],\n                \"record_type_from_lock\": 20,\n                \"record_type\": 8,\n                \"success\": 1,\n                \"username\": \"user123\",\n                \"keyboard_pwd\": \"\",\n                \"lock_date\": 1703123456789,\n                \"server_date\": 1703123456789,\n                \"electric_quantity\": 85,\n                \"event_type\": \"lock_operation\",\n                \"message\": \"Unlocked via fingerprint\",\n                \"raw_data\": {\"lockId\":\"12345678\",\"lockMac\":\"AA:BB:CC:DD:EE:FF\"},\n                \"request_id\": \"req_123\",\n                \"processed\": true,\n                \"processed_at\": \"2024-01-01T12:00:00.000000Z\",\n                \"processing_notes\": null,\n                \"created_at\": \"2024-01-01T12:00:00.000000Z\",\n                \"updated_at\": \"2024-01-01T12:00:00.000000Z\",\n                \"event_type_description\": \"Lock Operation\",\n                \"record_type_description\": \"Fingerprint Unlock\",\n                \"formatted_lock_date\": \"2024-01-01 12:00:56\",\n                \"formatted_server_date\": \"2024-01-01 12:00:56\",\n                \"battery_level_description\": \"Normal (85%)\"\n            }\n        ],\n        \"first_page_url\": \"https://api.yourdomain.com/api/v1/ttlock-callback/history?page=1\",\n        \"from\": 1,\n        \"last_page\": 5,\n        \"last_page_url\": \"https://api.yourdomain.com/api/v1/ttlock-callback/history?page=5\",\n        \"links\": [\n            {\n                \"url\": null,\n                \"label\": \"&laquo; Previous\",\n                \"active\": false\n            },\n            {\n                \"url\": \"https://api.yourdomain.com/api/v1/ttlock-callback/history?page=1\",\n                \"label\": \"1\",\n                \"active\": true\n            },\n            {\n                \"url\": \"https://api.yourdomain.com/api/v1/ttlock-callback/history?page=2\",\n                \"label\": \"2\",\n                \"active\": false\n            }\n        ],\n        \"next_page_url\": \"https://api.yourdomain.com/api/v1/ttlock-callback/history?page=2\",\n        \"path\": \"https://api.yourdomain.com/api/v1/ttlock-callback/history\",\n        \"per_page\": 10,\n        \"prev_page_url\": null,\n        \"to\": 10,\n        \"total\": 50\n    }\n}"
						}
					],
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has success true\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});",
									"",
									"pm.test(\"Response has pagination data\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('current_page');",
									"    pm.expect(jsonData.data).to.have.property('data');",
									"    pm.expect(jsonData.data).to.have.property('total');",
									"    pm.expect(jsonData.data.data).to.be.an('array');",
									"});",
									"",
									"pm.test(\"Response has callback history items\", function () {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.data.data.length > 0) {",
									"        var item = jsonData.data.data[0];",
									"        pm.expect(item).to.have.property('id');",
									"        pm.expect(item).to.have.property('lock_id');",
									"        pm.expect(item).to.have.property('event_type');",
									"        pm.expect(item).to.have.property('message');",
									"    }",
									"});"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "Get Callback Statistics",
					"request": {
						"method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{API_STATIC_TOKEN}}",
                                "type": "text"
                            }
                        ],
						"url": {
							"raw": "{{baseUrl}}/api/v1/ttlock-callback/statistics",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v1",
								"ttlock-callback",
								"statistics"
							]
						},
						"description": "Get callback statistics and metrics"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer your_access_token_here",
										"type": "text"
									}
								],
								"url": {
									"raw": "https://api.yourdomain.com/api/v1/ttlock-callback/statistics",
									"protocol": "https",
									"host": [
										"api",
										"yourdomain",
										"com"
									],
									"path": [
										"api",
										"v1",
										"ttlock-callback",
										"statistics"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"message\": \"Statistics retrieved successfully\",\n    \"data\": {\n        \"total_callbacks\": 150,\n        \"processed_callbacks\": 145,\n        \"unprocessed_callbacks\": 5,\n        \"recent_callbacks_24h\": 25,\n        \"recent_events\": [\n            {\n                \"id\": 123,\n                \"lock_id\": \"12345678\",\n                \"event_type\": \"lock_operation\",\n                \"message\": \"Unlocked via fingerprint\",\n                \"created_at\": \"2024-01-01T12:00:00.000000Z\"\n            },\n            {\n                \"id\": 124,\n                \"lock_id\": \"87654321\",\n                \"event_type\": \"battery_low\",\n                \"message\": \"Battery level is low (15%)\",\n                \"created_at\": \"2024-01-01T11:45:00.000000Z\"\n            }\n        ],\n        \"event_type_breakdown\": {\n            \"lock_operation\": 120,\n            \"battery_low\": 25,\n            \"security_alert\": 5\n        },\n        \"last_7_days\": [\n            {\"date\": \"2024-01-01\", \"count\": 25},\n            {\"date\": \"2024-01-02\", \"count\": 30},\n            {\"date\": \"2024-01-03\", \"count\": 20},\n            {\"date\": \"2024-01-04\", \"count\": 35},\n            {\"date\": \"2024-01-05\", \"count\": 28},\n            {\"date\": \"2024-01-06\", \"count\": 32},\n            {\"date\": \"2024-01-07\", \"count\": 22}\n        ]\n    }\n}"
						}
					],
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has success true\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.be.true;",
									"});",
									"",
									"pm.test(\"Response has statistics data\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data).to.have.property('total_callbacks');",
									"    pm.expect(jsonData.data).to.have.property('processed_callbacks');",
									"    pm.expect(jsonData.data).to.have.property('unprocessed_callbacks');",
									"    pm.expect(jsonData.data).to.have.property('recent_callbacks_24h');",
									"});",
									"",
									"pm.test(\"Statistics are valid numbers\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.data.total_callbacks).to.be.a('number');",
									"    pm.expect(jsonData.data.processed_callbacks).to.be.a('number');",
									"    pm.expect(jsonData.data.unprocessed_callbacks).to.be.a('number');",
									"    pm.expect(jsonData.data.recent_callbacks_24h).to.be.a('number');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					]
				}
			],
			"description": "Callback history and statistics endpoints"
		},
		{
			"name": "TTLock Lock Operations",
			"item": [
				{
					"name": "Lock - Unlock",
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{API_STATIC_TOKEN}}", "type": "text" },
							{ "key": "Content-Type", "value": "application/json" }
						],
						"body": { "mode": "raw", "raw": "{\n  \"lock_id\": \"{{testLockId}}\"\n}" },
						"url": { "raw": "{{baseUrl}}/api/v1/ttlock/lock/unlock", "host": ["{{baseUrl}}"], "path": ["api","v1","ttlock","lock","unlock"] },
						"description": "Unlock a lock by lock_id using static token"
					},
					"response": [
						{ "name": "Success Response", "originalRequest": { "method": "POST", "header": [ { "key": "Authorization", "value": "Bearer {{API_STATIC_TOKEN}}", "type": "text" }, { "key": "Content-Type", "value": "application/json" } ], "body": { "mode": "raw", "raw": "{\n  \"lock_id\": \"12345678\"\n}" }, "url": { "raw": "https://api.yourdomain.com/api/v1/ttlock/lock/unlock", "protocol": "https", "host": ["api","yourdomain","com"], "path": ["api","v1","ttlock","lock","unlock"] } }, "status": "OK", "code": 200, "_postman_previewlanguage": "json", "header": [ { "key": "Content-Type", "value": "application/json" } ], "cookie": [], "body": "{\n  \"success\": true,\n  \"message\": \"Lock unlocked successfully\",\n  \"data\": {\n    \"lock_id\": \"12345678\",\n    \"status\": \"unlocked\"\n  }\n}" }
					]
				},
				{
					"name": "Lock - Lock",
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Authorization", "value": "Bearer {{API_STATIC_TOKEN}}", "type": "text" },
							{ "key": "Content-Type", "value": "application/json" }
						],
						"body": { "mode": "raw", "raw": "{\n  \"lock_id\": \"{{testLockId}}\"\n}" },
						"url": { "raw": "{{baseUrl}}/api/v1/ttlock/lock/lock", "host": ["{{baseUrl}}"], "path": ["api","v1","ttlock","lock","lock"] },
						"description": "Lock a lock by lock_id using static token"
					},
					"response": [
						{ "name": "Success Response", "originalRequest": { "method": "POST", "header": [ { "key": "Authorization", "value": "Bearer {{API_STATIC_TOKEN}}", "type": "text" }, { "key": "Content-Type", "value": "application/json" } ], "body": { "mode": "raw", "raw": "{\n  \"lock_id\": \"12345678\"\n}" }, "url": { "raw": "https://api.yourdomain.com/api/v1/ttlock/lock/lock", "protocol": "https", "host": ["api","yourdomain","com"], "path": ["api","v1","ttlock","lock","lock"] } }, "status": "OK", "code": 200, "_postman_previewlanguage": "json", "header": [ { "key": "Content-Type", "value": "application/json" } ], "cookie": [], "body": "{\n  \"success\": true,\n  \"message\": \"Lock locked successfully\",\n  \"data\": {\n    \"lock_id\": \"12345678\",\n    \"status\": \"locked\"\n  }\n}" }
					]
				},
				{
					"name": "Lock - Status",
					"request": {
						"method": "GET",
						"header": [ { "key": "Authorization", "value": "Bearer {{API_STATIC_TOKEN}}", "type": "text" } ],
						"url": { "raw": "{{baseUrl}}/api/v1/ttlock/lock/status?lock_id={{testLockId}}", "host": ["{{baseUrl}}"], "path": ["api","v1","ttlock","lock","status"], "query": [ { "key": "lock_id", "value": "{{testLockId}}" } ] },
						"description": "Get lock status by lock_id using static token"
					},
					"response": [
						{ "name": "Success Response", "originalRequest": { "method": "GET", "header": [ { "key": "Authorization", "value": "Bearer {{API_STATIC_TOKEN}}", "type": "text" } ], "url": { "raw": "https://api.yourdomain.com/api/v1/ttlock/lock/status?lock_id=12345678", "protocol": "https", "host": ["api","yourdomain","com"], "path": ["api","v1","ttlock","lock","status"], "query": [ { "key": "lock_id", "value": "12345678" } ] } }, "status": "OK", "code": 200, "_postman_previewlanguage": "json", "header": [ { "key": "Content-Type", "value": "application/json" } ], "cookie": [], "body": "{\n  \"success\": true,\n  \"message\": \"Lock status retrieved successfully\",\n  \"data\": {\n    \"lock_id\": \"12345678\",\n    \"status\": \"locked\",\n    \"battery\": 85\n  }\n}" }
					]
				}
			],
			"description": "TTLock lock control endpoints using static API token"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Set timestamp for requests",
					"pm.globals.set('timestamp', new Date().toISOString());",
					"",
					"// Log request start",
					"console.log('Starting request:', pm.info.requestName);"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global test for response time",
					"pm.test('Response time is less than 5000ms', function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(5000);",
					"});",
					"",
					"// Global test for content type",
					"pm.test('Content-Type is application/json', function () {",
					"    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
					"});",
					"",
					"// Log response time",
					"console.log('Response time:', pm.response.responseTime + 'ms');"
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "{{baseUrl}}",
			"type": "string"
		},
		{
			"key": "accessToken",
			"value": "{{accessToken}}",
			"type": "string"
		},
		{
			"key": "API_STATIC_TOKEN",
			"value": "{{API_STATIC_TOKEN}}",
			"type": "string"
		}
	]
}
